<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WED Zusammenfassung</title>
    <link href="./node_modules/prismjs/themes/prism.css" rel="stylesheet"/>
    <link href="./lib/prism-line-numbers.css" rel="stylesheet"/>

    <link href="./style.css" rel="stylesheet"/>
    <script src="./layoutSwitch.js"></script>
</head>
<body layout="print">
<div class="noDisplay">
    <p>Change Layout <label class="switch">
        <input id="layoutSwitch" type="checkbox"/>
        <span class="slider round"></span>
    </label></p>
</div>
<!--          -->
<!--Page No. 1-->
<!--          -->

<div class="page">
    <h1>CSS Grid</h1>
    <pre class="code"><code class="language-css">#grid-container {
  display: grid; //inline-grid: inline | grid: block-level
  width: 100px;
  grid-template-columns: 1fr 60px minmax(10px, 200px);
  grid-template-rows: 1fr 1fr;
  grid-template-areas: 
    'nav nav nav nav'
    'toc item item .'
    'toc item item .'
    'footer footer footer footer';
  align-items: auto|normal|start|end|center|stretch|baseline;
  justify-items: auto|normal|start|end|center|stretch|baseline;}
.item {
/*Shorthand for 'grid-row-start' and 'grid-row-end'.
  span Anzahl columns von 1*/
  grid-row: 1 / span 2;
  grid-column: 1 
  gap: 10px;
/*Is a shorthand property for the grid-row-start,
  grid-column-start, grid-row-end,
  and grid-column-end in that order.
  Each value is separated by a /.*/
  grid-area: 2 / 1 / span 2 / span 3;
/*Es kann auch ein Name vergeben werden, der dann in grid-template-areas gebraucht werden kann*/
  grid-area: item;
/*inherits align-items if defined overwrites align-items value*/
  align-self: center; 
/*inherits justify-items if defined overwrites justify-items value*/
  justify-self: auto | normal | start;}
nav { grid-area: nav; }
.side-toc { grid-area: toc; }
footer {grid-area: footer;}</code></pre>
    <h1>CSS Flexbox</h1>
    <h2>Facts:</h2>Alle Elemente Verhalten sich wie "inline blocks" (erlaubt margin (left &
    right) und paddding,
    erlaubt andere Elemente auf der gelichen Zeile, erlaubt <b>width</b> und <b>height</b>
    <h2>flex-grow:</h2>
    Entspricht dem Verhältnis wie der leere Platz verteilt wird. Default: 0 (nicht grösser werden)
    <h2>flex-shrink</h2>
    Entspricht dem Verhältnis wie die Elemente kleiner werden, wenn zu wenig PLatz vorhanden ist, Default: 0
    <h2>flex-basis</h2>
    Alternative: content | Ist initialer Wert für Grösse eines flex item. flex-direction: row -A value steht für
    width,
    column -> value steht für Breite
    <h2>flex-wrap:</h2>
    Problem: zuviele Elemente in einer Reihe
    <h2>(flex-order) order:</h2>
    Werden in aufsteigender Reihenfolge dargestellt, Default: 0
    <pre class="code"><code class="language-css">.container {
  display: flex;
  flex-direction: row|row-reverse|column|column-reverse;
  flex-wrap: wrap;
  flex-flow: [flex-direction] [flex-wrap];
  align-items: stretch;
/*nur sinvoll bei fixer Item Grösse*/
  justify-content: center;}
.item {
  flex-grow: 1;
  flex-shrink: 1; 
  flex-basis: 20px;
  flex: [flex-grow] [flex-shrink] [flex-basis];}
.baboItem { order: -1; }</code></pre>
    <h1>User Centered Design</h1>
    <h2>Zsm:</h2>Den user befragen ist <b>nicht</b> User Centerd Design,
    sondern beobachen was sie machen.
    <h2>Stolze:</h2> You may ask you customers, but not your users.
    Man sollte sich bewusst sein, wer der User ist.
    <h2>Features of Good User Research:</h2>
    Representative Benutzer auswählen, Sinvolle und realistische Tests machen,
    momentante tools und strategies verwenden, in einem sinvollen und representativen context
    <h2>Information Scent:</h2>
    Links etc. sind so bennant, dass klar ist welche Ziele durch die Navigation erreich (und nicht erreicht)
    werden.
    <h2>Site Map: </h2> Baumstruktur der Navigation
    <h2>Raster Design: </h2> Gute "Ausschilderung" User sollten stets wissen:
    <ul>
        <li>Wo bin ich im Moment: Eindeutiger Seitentitel, konsistenter Header, Icons, Seitendesign, Was kann ich
            machen
        </li>
        <li>Wo kann ich hin: Deutlich sichtbare Navigationselemente</li>
        <li>Was ist passiert: Navigation z.B. animiert, Browser back unterstützen</li>
    </ul>
    <h2>Usability: </h2>
    <ul>
        <li>Effektivität: Benutzer könne Ziele erreichen</li>
        <li>Effizienz: Benutzer können ihre Ziele mit angemessenem Aufwand erreichen</li>
        <li>Zufriedenheit: Benutzer sind positiv gegenüber dem System eingestellt</li>
    </ul>
    <h2>Card Sorting: </h2>
    <b>Schritt 1: </b>Content Repository Erstellen (Was sind Zielpunkte der Navigation)
    <b>Schritt 2: </b>
    <ul>
        <li>"Open Card Sort" 5+ Personen aus der Zielgruppe rekrutieren</li>
        <li>Content Elemente in disjunkte (Elemente haben nichts gemeinsam) Gruppen ordnen lassen</li>
        <li>Gruppen benennen lassen</li>
    </ul>
    <b>Schritt 3: </b>Gute Gruppennamen identifizieren (Hypothese)
    <b>Schritt 4: </b>Gruppennamen mittels "Closed Card Sort" Validieren
    <ul>
        <li>5+ Neue Personen aus der Zielgruppe rekrutieren</li>
        <li>Gruppenname vorgeben</li>
        <li>Content Elemente den Gruppen zuordnen lassen</li>
    </ul>
    <h2>Tree Testing: </h2>
    Aufgabe geben, Geh auf die Seite X. User klickt sich durch und es kann beobachtet werden wie er sich
    verhaltet.
    <h2>Usability Test</h2> Test der die einzelnen Teile der Usability tested,
    Task beinhaltet den context des Users, das Bedürfnis, das Ziel und den Auslöser
    <h1>CSS Animation</h1>
    <h2>Transition Properties</h2>
    <pre class="code"><code class="language-css">.ex{
/*which property to change */
  transition-property: prop-name | all | none;
/*how long the transition should take in s or ms*/
  transition-duration: 5ms | 3s;
/*manner in which the transition accelerates*/
  transition-timing-function: ease|linear|ease-in|ease-out|ease-in-out|step-start|step-end|steps(...)|cubic-bezier(#,#,#,#);
/*if there should be a pause before starting and duration of said pause*/
  transition-delay: 0.2s;
/*shorthand transition property: prop dur timing-function delay*/
  transition: background-color .3s ease-in 0.2s;
/*transitioning multiple properties*/
  transition: background-color .3s ease-out 1s,
              color 2s ease-in,
              letter-spacing .2s ease-out;
/*defining same duration, timing and delay for all transitions*/
  transition: all .2s ease-in-out;
}</code></pre>
    <h2>Transforms</h2>
    <pre class="code"><code class="language-css">.ex{
/*changes shape, rotation of elements (func() funcX() funcY())*/
  transform: rotate()|translate()|scale()|skew()|none;
/*point around which an element is transformed, defined by horizontal and vertical offsets*/
  transform-origin: %|length|left|center|right|top|bottom;
/*translate() function is used as the value of transform to render an element at a new location*/
  transform: translate(90px, 60px) | translate(20%);}</code></pre>
    <h2>Keyframes</h2>
    <pre class="code"><code class="language-css">@keyframes wiggleAnimation {
  0% { transform: skewX(9deg); }
  10% { transform: skewX(-8deg); }
  20% { transform: skewX(7deg); }
  30% { transform: skewX(-6deg); } ...
  90% { transform: skewX(0deg);}
  100% { transform: skewX(0deg); }}
.wiggle {
  animation-name: wiggleAnimation;
  animation-duration: 1s;}</code></pre>
    <h1>Testing</h1>
    <h2>TDD</h2>Test anything that might break, New Code is quilty until proven innocent,
    Write at least as much test code as production code
    Run all testc before check-in to repository
    <h2>Unit Tests: </h2>Getestet werden einzelne "Units": Klassen, Module (meist ein File)
    Automation relativ einfach, <b>Herausforderung:</b> Isolation der Units, asynchrone Operationen,
    Testdatengenerierung (z.B. Fuzzing)
    <h2>System Tests: </h2>
    Getestet wird das Zusammenspiel aller Systemkomponenten in der Zielumgebung
    Automation meist nur in Teilen möglich.
    <b>Herausforderungen</b>: Realistische aber vorhersagbare Umgebung
    <b>Weitere System Tests:</b>Load Tests, Performance Tests, Endurance Tests, Chaos Tests, Security Tests,
    Usability Tests
    <h2>Integration Tests: </h2>Getestet wird das Zusammenspiel 2 oder mehr "Units"
    (E2E: Integration über alle Layer), Automation meist möglich
    <b>Herausforderungen:</b> Isolation der Units, asynchrone Operationen, Simulation Browser &
    Benutzerinteraktion, Test mit Datenbank, Testdatengenerierung (z.B. Fuzzing)
    <h2>(Visuelle) Regression Tests: </h2>
    Getestet wird ob Veränderungen im Code zu (unerwarteten) Änderungen im Verhalten (oder UI)
    führen. Automation möglich mit speziellen Tools
    <h2>Test-Runner: </h2>Ein Rahmen der Tests entgegennimmt, ausführt und die Resultate
    anzeigt.
    <b>Beispiele:</b> Jest, Mocha, Jasmin
    <h2>Assertion-Libraries: </h2>
    Code zur Ausführung einzelner Tests
    <b>Beispiele: </b> Assert, Chai, Expect.js
    <h2>Mocking-Library: </h2>
    Separierung von Units / Erstellung von Mocks etc.
    <b>Beispiele: </b>Expect.js, Proxyquire, Sinon.js
    <h2>Phasen eines Tests</h2>
    <ul>
        <li><b>Setup:</b> beforeEach Initialization, selbe Ausgangslage für alle Tests</li>
        <li><b>Exercise:</b> Aufruf einer Funktion (mit return value)</li>
        <li><b>Verify:</b> Überprüfen von Annahmen</li>
        <li><b>Teardown:</b> Zurücksetzen z.B. von mocks</li>
    </ul>
    <h2>Beispiele</h2>
    <pre class="code"><code class="language-javascript">const chai = require('chai');
const sinon = require("sinon");
const proxyquire = require("proxyquire");
const expect = chai.expect;
function stub(v) {return v*2;}
const currencyConverter = proxyquire("../cc", { convert: stub });
describe("A new bank account", function() {
  beforeEach(function() {
    this.account = new BankAccount();
    clock = sinon.useFakeTimers(constantNow); // stub/fake Date
    this.converter = new currencyConverter("mysecret");
    this.accountAWithdrawSpy=sinon.spy(this.accountA,"withdraw");
  });
  afterEach(function() {
    clock.restore();
  })
  it("is initialized by a balance of 0", function() {
    expect(this.account.balance).to.equal(0);
  });
  it("should convert correct", function() {
    this.account.add(20);
    expect(converter(this.account.balance)).to.equal(40);
  });
  it("correctly calls withdrawal", function() {
    this.transaction.execute();
    sinon.assert.calledWith(this.accountAWithdrawSpy,
     transactionAmount);
    //expect(this.accountAWithdrawSpy
    //.calledWith(transactionAmount)).to.be.true;
    });
  it("should not allow a withdraw", function() {
    expect(this.account.withdraw(50)).to.equal(false);
    expect(this.account.balance).to.throw(new NoMoneyError("No money"));
  });
});</code></pre>
    <h2>Chai Chains:</h2>
    <ul>
        <li>.to, .be, .been, .is, .that, .which, .and, .not</li>
        <li>.true, .false, .undefined, .NaN, .exist,</li>
        <li>.equal(
            &ltvalue&gt), .deep.equal(
            &ltvalue&gt)
        </li>
        <li>.includes([…
            &ltvalue&gt]), .any.keys, .all.keys
        </li>
        <li>.a(
            &ltbaseType&gt), instanceOf(
            &ltclass&gt)
        </li>
        <li>throws()</li>
    </ul>
    <h2>Test Doubles:</h2>Abhängigkeiten möglichst lose, für tests Doubles verwenden
    <ul>
        <li>Stub & Fake: liefern vorbestimmten Wert</li>
        <li>Spy & Mock: Helfen einen überprüfbaren Content zu generieren</li>
    </ul>
    <h2>Test-Smells:</h2>
    <ul>
        <li>Hard-to-Test Code: Schlecht geschriebener Code</li>
        <li>Production Bugs: Zuviele Bugs während testing oder in prod</li>
        <li>Fragile Test: Tests verhalten sich verschieden auf unterschieldichen Systemen</li>
        <li>Errativ Test: Test funktionieren manchmal und manchmal nicht</li>
        <li>Es gibt keine Tests</li>
    </ul>
    <h1>Sass (Syntactically Awesome Style Sheet)</h1>
    <h2>Alternativen:</h2> Less, stylus
    <h2>Aufgabe und Einsatzbereich</h2>
    CSS Präprozessoern sind nicht an die Limitation von CSS gebunden und ermöglichen es (potentiell)
    besser wartbaren Code zu schreiben. Weniger Copy & Paste, Modularisierung, Wiederverwendung
    <b>Output: </b> ist immer CSS
    <h2>Einheiten</h2>Können mit folgenden Operatoren <b>+, -, *, /, und %</b> verwendet werden.
    Berechnungen werden wie in Physik, z.B. px*px = px^2 (Error), 2px / 1px = 2
    <h2>PostCSS: </h2>besteht aus: Parser der "abstract syntax tree" erstellt,
    Pluign Architektur, Stringifyer <b>Plugins:</b>precss (für Sass-like features variables, nesting, mixin),
    cssnano (CSS minifier), postcss-sass (erlaubt es mit Sass zu arbeiten, kompiliert Sass nicht)
    <b>Einsatzbereiche: </b> Fügt automatisch vendor prefixes CSS rules hinzu (-webkit-,-ms-), 
    Konvertiert modernes CSS in CSS das alle Browser verstehen
    <h2>Web Build Tools</h2>«Build Tools» automatisieren die Erstellung von App-Bundels für Test und Deployment
    <b>Features: </b> Code Splitting ("Tree Shaking"), Hashing, Non-JS Resource loading-optimization
    <b>Tools: </b>WebPack, Rollup, Parcel
    X-Browser module-loading optimization, Transformation (minification, compression, ciritcal CSS)
    <h2>Beispiele</h2> <b>.scss</b> files müssen <b>{}</b> und <b>;</b> verwenden <b>.sass</b> Files nicht
    <h2>Spezielle Zeichen: </h2> <b>$</b> Variablen, <b>&</b> Referezen auf Parent, <b>%</b> Placeholder,
    <b>@</b> Steuerzeichen, Directives z.B. @if @else @function, <b>#{}</b> Interpolation Einsetzen, z.B. p.#{$name}
    <h2>Nesting</h2>
    <pre class="code"><code class="language-css">nav {ul {
    padding: 0;
    > li { /*only direct child*/
      color: red
      &[type="link"] { /*& gets replaced with parent*/
        color: yellow;
      }}}}</code></pre>
    <h2>@use, @import</h2> <strong>immer</strong> zuoberst von File
    <pre class="code"><code class="language-css">//file: _colors.scss
@use 'colors'; /*erlaubt alle Variabeln aus diesem File*/ 
//file: _normalize.scss
@import "normalize"; /*importiert/merged, normalize oben*/
h1 {
  color: colors.$header-color}</code></pre>
    <h2>@extend</h2> weniger CSS-Code als Mixin,
    <pre class="code"><code class="language-css">%shared { /*abstrakte Basis-Klasse erscheint nicht im generierten CSS*/
  padding: 10px;}
.text {
  font-size: 1.5em;}
.message {
  @extend %shared;
  @extend .text;
  color: green;}</code></pre>
    daraus wird folgendes css:
    <pre class="code"><code class="language-css">.message /*any other selector extending shared*/
  padding: 10px
.message   
  color: green</code></pre>
    <h2>@mixin und @include</h2> immer zuoberst, weniger CSS-Selektoren als @extend, Verständlicher, Falls Parameter
    benötigt
    <pre class="code"><code class="language-css">@mixin babo {color: blue}
@mixin bratte {
  @include babo
  li {color: red}}
@mixin rtl($property, $ltr-value, $rtl-value) {
  #{$property}: $ltr-value;
  [dir=rtl] & {
    #{$property}: $rtl-value;}}
nav ul {@include bratte;}
.sidebar {@include rtl(float, left, right)}
@include breakpoint(30em) { /*breakpoint ist ein mixin das @content verwendet*/
  .box {@include border-radius(0px);}
}</code></pre>
    wird in folgendes CSS umgewandelt
    <pre class="code"><code class="language-css">/*bratte und babo*/
nav ul { color: blue;}
nav ul li { color: red;}
/*rtl*/
.sidebar { float: left;}
[dir=rtl] .sidebar { float: right;}
/*breakpoint*/
@media screen and (min-width: 30em) {.box {border-radius: 0px;}}</code></pre>
    <h2>Verwendung von & (parent)</h2>
    <pre class="code"><code class="language-css">@mixin hover() {&:hover{background: red;}}
.box {@include hover();}</code></pre>
    Wird zu folgendem CSS:
    <pre class="code"><code class="language-css">.box:hover {background: red;}</code></pre>
    <h2>Functions</h2>
    <pre class="code"><code class="language-css">@function properWidht($para){
  @if($para >= 100 and $para <= 500) {@return $para / 10);}
  @else{@return $para;}
}
body{width: properWidht($width);}</code></pre>
    <h2>Loops</h2>
    <pre class="code"><code class="language-css">$breakpoints: 30em 46em ; /*list*/
@each $point in $breakpoints {
  @media all and (max-width : $point) {
    body{
      @if $point > 40em {width: $width;}
      @else{width: $width * 2;}
    }}}</code></pre>
    daraus wird folgender CSS-Code
    <pre class="code"><code class="language-css">media all and (max-width: 30em) {body {width: 4px;}} /*für jeden list entry*/</code></pre>
    <h2>Maps</h2>
    <pre class="code"><code class="language-css">$colors: (grey: #404145, yellow: #ecaf2d);
@each $name, $hex in $colors { //z.B. name=grey, hex=#404145</code></pre>
</div>


<!--          -->
<!--Page No. 2-->
<!--          -->


<div class="page">
    <h1>Node</h1>
    <h2>Application - app.js:</h2>
    <pre class="code line-numbers"><code class="language-javascript">const express = require('express');
const path = require('path');
const session = require('express-session');
const app = express();
// view engine setup
app.set('views', path.join(__dirname, 'views'));
app.set('view engine', 'hbs');
app.use(express.urlencoded({ extended: false }));
app.use(session({secret: 'abcdefg',
resave: false, saveUninitialized: true}));
app.use(express.static(path.join(__dirname, 'public')));
app.use('/', require('./routes/index'));
module.exports = app;</code></pre>
    <h2>Routes - routes/index.js:</h2>
    <pre class="code line-numbers"><code class="language-javascript">const express = require('express');
const router = express.Router();
const controller = require('../controllers/shopController')
router.get('/', controller.index);
router.post('/add', controller.add);
router.post('/remove', controller.remove);
router.post('/bestellung', controller.bestellung);
module.exports = router;</code></pre>
    <h2>Services - services/shopService.js</h2>
    <pre class="code line-numbers"><code class="language-javascript">const Datastore = require('nedb');
const db = new Datastore({filename: './data/shop.db', autoload: true});
class Item {
 constructor(name, preis) {
 this.name = name;
 this.preis = preis;}}
function all(callback) {
 db.find({}, callback);}
function get(id, callback) {
 db.find({_id: id}, callback);}
module.exports = {all, get};</code></pre>
    <h2>Controllers - controllers/shopController.js</h2>
    <pre class="code line-numbers"><code class="language-javascript">const shop = require('../services/shopService.js');
function index(req, res) {
 ensureSession(req.session);
 shop.all((err, items)
 const warenkorb = req.session.warenkorb;
 items.forEach(item => {
 item.count = warenkorb[item._id] || 0;});
 res.render("index", {items: items, warenkorbCount: getCountFromSession(req)});})}
function bestellung(req, res) {
 shop.all((err, items) => {
 const selectedItems = Object.keys(req.session.warenkorb).map(key => {
 return {item: items.find(x => x._id === key), count:
req.session.warenkorb[key]};});
 const preis = selectedItems.reduce((previousValue, currentValue) => previousValue
+ currentValue.item.preis * currentValue.count, 0);
 req.session.warenkorb = {}; 2P (Session zurücksetzen)
 4P renderer, items, sum preis, count
 res.render("bestellung", {items: selectedItems, preis: preis, warenkorbCount:
0});})}
function add(req, res) {
 req.session.warenkorb[req.body.id] = (req.session.warenkorb[req.body.id] || 0) + 1;
 res.redirect("/");}
function remove(req, res) {
 req.session.warenkorb[req.body.id] = Math.max(0, (req.session.warenkorb[req.body.id]
|| 0) - 1);
 res.redirect("/");}
function getCountFromSession(req) {
 return Object.values(req.session.warenkorb).reduce((previousValue, currentValue) =>
previousValue += currentValue, 0);}
function ensureSession(session) {
 if (!session.warenkorb) {
 session.warenkorb = {};}}
module.exports = {index, add, remove, bestellung};</code></pre>
    <h1>Cookies: </h1>
    <pre class="code line-numbers"><code class="language-javascript">var cookieParser = require('cookie-parser')
app.use(cookieParser())
/*read Cookies*/ console.log('Cookies: ', req.cookies)
/*write Cookies*/ res.cookie('name', 'tobi', { domain: '.example.com', path: '/admin', secure: true })
/*or*/res.cookie('rememberme', '1', { expires: new Date(Date.now() + 900000), httpOnly: true })</code></pre>
    <h1>Handlebars: </h1>
    <pre class="code"><code class="escapeHtml">{{#if author}}
    <h1>{{firstName}}{{lastName}}</h1>
{{/if}}
{{#unless license}}
    <h3 class="warning">WARNING no license</h3>
{{/unless}}
{{#each people}}
    <li>{{this}}</li>
{{/each}}
{{#each array}}
    {{@root.foo}}
    {{#if @first}}First!{{/if}}
    {{@index}}
    {{@key}}
    {{#if @last}}Last!{{/if}}
{{/each}}</code></pre>
    <h1>TypeScript</h1>
    TypeScript hilft mittels "Statischer Analyse"
    <ul>
        <li>Typos zu entdecken</li>
        <li>Static Typing</li>
        <li>Erlaubt Spezifikation von Typen für Variablen, Funktionsparameter, Funktionswerten</li>
        <li>erweitern der JS Syntax um optionale Typ-Annotation und mehr (z.B. Decorators)</li>
        <li>Intelisense und Checking in Editoren</li>
        <li>Pre-Processor der JavaScript generiert</li>
    </ul>
    <h2>TSLint und Prettier</h2>
    <b>TSLint:</b> Tool für die statische Analyse von TypeScript, ist deprecated durch ESLint ersetzten
    <b>Prettier: </b> Ist ein Code Formator, hilft einen konsistenten Code Style im gesamten Projekt durchzusetzen, z.B.
    Semicolons, Quotes oder Tab size
    <h2>Syntax</h2>
    <b>Basis-Typen:</b> boolean, number, string (sowie null und undefined)
    <pre class="code"><code class="language-javascript">// Array declaration
let myNumArray: number[] = [1, 2, 3];
let myTupel: [number, string] = [1, 'abcd']
// jedem value kann ein value mit 
// einem beliebigen Typ zugeweisen werden
let myNotInferredTupel = [1, 'abcd'];
// enum declaration
enum Color {Red, Green, Blue};
enum StrColor {Red = "red", Green = "green"};
type StrLitColor = "red" | "green";
// enum verwenden
let c: Color = Color.Green;
let myTupel2: [Color, number] = [Color.Green, 1];
function add(n1: number, n2: number): number;
//function Parameter
numFun: (prevRes: number, current: number) => number
class Counter {
  private _doors: number;
  public static readonly WOOD_FACTORS = {'oak': 80, 'pine': 20};
  constructor({doors = 2}: {doors?: number} = {}) {
    this.doors = doors; // Fehler wenn doors nicht gesetzt wird, wäre korrekt in JS
  }
  set doors(newDoorCount: number) {
    this._doors = newDoorCount;
  }
  get doors() {
  return this._doors;
  }
}
class SportsCar {
  //Verkürzte Syntax zur Initialisierung von Properties im Konstruktor
  constructor(
  public make: string,
  public color: SportsCarColor,
  public gears: number,
  ) { //kein code nötig }
}
interface IPoint {
  readonly x: number;
  readonly y: number;
}
interface ILikableItem { likes?: number; }
class DescribableItem {
  constructor(
    public description: string
  ){}
}
class PointOfInterest extends DescribableItem implements IPoint, ILikableItem {
  constructor(public x: number, public y: number, description: string, public likes?:number) {
    super(description);
  }
}
// Express types
interface CalcRequest extends Request {
  body: {num1?: string; num2?: string}
}</code></pre>
    <h2>Regeln</h2>
    <ul>
        <li>any kann beliebiger Wert zugewiesen werden</li>
        <li>
            TypeScript findet Type heraus, falls Typ nicht deklariert,
            es kann nur noch der Typ des ersten zugewiesenen value verwendet werden.
        </li>
        <li>StrictNullChecks:
            <ul>
                <li>Fehler wenn nonnullable value null zugewiesen wird, ohne strict mode kein Fehler</li>
                <li><b>Kein</b> Fehler wenn nullable value undefined zugewiesen wird aber falls null zugewiesen wird
                    schon
                </li>
                <li>Fehler bei zuvielen Parametern in strict und in nicht strict mode</li>
                <li>Fehler bei falschem Typ von zugewiesenem Wert in strict und in nicht strict mode</li>
            </ul>
    </ul>
    <h2>Interfaces</h2> Eine Klasse darf mehr als ein Interface implementieren
    <h2>Structural Typing</h2> Typ Identifikation wird über Struktur des Typ gemacht und nicht über den Namen des Typ.


    <h1>Security</h1>
    <h2>Vokabular</h2>
    <ul>
        <li><strong>Vulnerability</strong>: Verwundbarkeit</li>
        <li><strong>Attack Vector (AV)</strong>: Angriffsvorgehen</li>
        <li><strong>Malicious Code</strong>: Angriffcode, Schadcode</li>
        <li><strong>Injection Attack</strong>: Code wird System zur Ausführung untergeschoben</li>
        <li><strong>XSS: Cross Site Scripting</strong>: Im Browser des Opfers wird eingeschleustes JS ausgeführt</li>
    </ul>

    <h2>XSS Mitigation</h2>
    <ul>
        <li><strong>Input Sanitization</strong>: Bereinigung von UserInput, <i>do not implement your own
            sanitization</i></li>
        <li><strong>CSP</strong>: Content Security Policy im Header setzen (e.g. nur Secure Domain + REST Service darf
            kontaktiert werden)
        </li>
        <li><strong>HTTPOnly Flag</strong> bei Cookies setzen</li>
    </ul>

    <h2>JS Code Injection Mitigation</h2>
    <ul>
        <li><strong>KEINE</strong> Verwendung von eval, setTimeOut, setInterval, besser parseInt + JSON.parse nutzen
        </li>
        <li><strong>Reduzieren</strong>: Global Scopes und Variablen</li>
        <li><strong>Node</strong> nicht als root process starten; x-powered-by header information abbestellen</li>
    </ul>

    <h2>Broken Authentication</h2>
    <ul>
        <li><strong>Vulnerability</strong>: PW oder Token wird unverschlüsselt übertragen</li>
        <li><strong>AV</strong>: Network Sniffing Software</li>
        <li><strong>Mitigation</strong>: TLS, Auth-Service, <i>PW-based Auth nicht selbst implementieren</i>, keine
            geheimen Informationen in Query params
        </li>
        <br/>
        <li><strong>Vulnerability</strong>: Session Timeout zu lange</li>
        <li><strong>AV</strong>: Opfer nutzt public PC, vergisst Logout</li>
        <li><strong>Mitigation</strong>: Session Timeout sinnvoll setzen</li>
        <br/>
        <li><strong>Vulnerability</strong>: CSRF, Formular + POST handler nicht geschützt, es wird nicht sichergestellt,
            dass das form vom Server generiert wurde
        </li>
        <li><strong>AV</strong>: Attacker brint Opfer dazu mit gültiger Session auf Seite mit gefälschtem form zu gehen
            & zu submitten
        </li>
        <li><strong>Mitigation</strong>: forms mit CSRF Token versehen, Gültigkeit wird bei POST Req geprüft | in
            Express mit csurf lib:
            <pre class="code"><code class="language-javascript">const csrf = require("csurf"); app.use(csrf({cooke: true}));</code></pre>
        </li>
    </ul>

    <h2>Broken Access Control</h2>
    <ul>
        <li><strong>Vulnerability</strong>: User-ID ist nur über URL codiert</li>
        <li><strong>AV</strong>: Attacker loggt sich ein & verändert URL</li>
        <li><strong>Mitigation</strong>: bei Anzeige von Seiten sicherstellen, dass aktuell eingeloggter User berechtigt
            ist
        </li>
        <br/>
        <li><strong>Vulnerability</strong>: Replay Attack</li>
        <li><strong>AV</strong>: Erneutes Senden von Formularen ist möglich & werden mehrfach verarbeitet</li>
        <li><strong>Mitigation</strong>: One-Time CSRF Token</li>
    </ul>

    <h2>Passwordless Login</h2>
    <span>
      Nutzer erhalten (one-time) "magic-link" per EMail, Code genügend lange dass Brute-Force attacks verhindert sind
    </span>

    <h2>Should I operate my own password-based Auth-Service?</h2>
    <img src="./assets/AuthServiceDesicionTree.PNG" alt="AuthServiceDesicionTree"/>

    <h2>How to keep Express Apps secure</h2>
    <ul>
        <li>Enable TSL / SSL</li>
        <li>Check for known vulnerabilities</li>
        <li>encode all untrusted data sent to an application (HTML, CSS, JS, URL)</li>
        <li>Test for parameter pollution (ensure that app can handle array values for form query-parameters)</li>
        <li>Add Helmet to set sane defaults</li>
        <li>Use CSURF against CSRF</li>
        <li>Use Safe-Regex</li>
        <li>Don't use the default session cookie name, use generic cookie names</li>
    </ul>

    <h2>Helmet</h2>
    <span>11 security modules preventing a variety of attacks against an Express application</span>
    <ul>
        <li><strong>helmet-csp</strong>: enables content-security-policy HTTP header, defines the trusted origins of
            contents (scripts, images, etc.)
        </li>
        <li><strong>dns-prefetch-control</strong>: DNS Prefetching = speeding up loading times, disabling it can limit
            potential data leakage about types of service an application uses
        </li>
        <li><strong>frameguard</strong>: enables X-Frame-Options HTTP header, website cannot render another site</li>
        <li><strong>hpkp</strong>: enables public key pinning headers, prevent man-in-the-middle attchs with fored certs
        </li>
        <li><strong>hsts</strong>: enables strict-transport-security header which forces subsequent connections to the
            server to use HTTPS once a client has initially connected with HTTPS
        </li>
        <li><strong>ienoopen</strong>: enables the x-download-options HTTP header with the configuration of noopen to
            prevent IE users from executing downloads within an app's context
        </li>
        <li><strong>nocache</strong>: enables four HTTP headers: cache-control, pragma, expires, surrogate-control with
            defaults that block the client caching old versions of site resources
        </li>
        <li><strong>dont-sniff-mimetype</strong>: enables the x-content-type-options HTTP header to stop clients from
            sniffing the MIME-type of a response outside of the content-type that is declared
        </li>
        <li><strong>referrer-policy</strong>: allows for control over the referrer HTTP header from your application,
            allowing no referrer information, referrer information for the same origin or full referrer information
        </li>
        <li><strong>x-xss-protection</strong>: enables the X-XSS-Protection HTTP header preventing some XSS attacks in
            modern browsers
        </li>
    </ul>
</div>
<script src="./htmlEscapingInCodeElement.js"></script>
<script src="./titleColorAssigner.js"></script>
<script src="./node_modules/prismjs/prism.js"></script>
<script src="./node_modules/prismjs/plugins/line-numbers/prism-line-numbers.js"></script>

</body>
</html>
